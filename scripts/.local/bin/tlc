#!/bin/bash

IMAGE="tlc-local"

if ! docker image inspect "$IMAGE" &>/dev/null; then
  docker build -t "$IMAGE" - <<'DOCKERFILE'
FROM eclipse-temurin:21-jre-alpine
RUN wget -qO /tla2tools.jar https://github.com/tlaplus/tlaplus/releases/download/v1.8.0/tla2tools.jar
DOCKERFILE
fi

docker run --rm -v "$(pwd):/work" -w /work "$IMAGE" java -cp /tla2tools.jar pcal.trans "$@"
docker run --rm -v "$(pwd):/work" -w /work "$IMAGE" java -cp /tla2tools.jar tlc2.TLC "$@"
